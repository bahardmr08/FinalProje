---
title: "Proje Rapor : Bahar Demir 210401031"
output:
  html_document:
    df_print: paged
---

# Q1 : Problem tanımı

Şirketimiz **B&M**. Problemimiz *B&M Travel şirketi, mevcut sistemde yetersiz müşteri tatil ve tur tercihi verilerine sahip olmanın getirdiği sorunlarla karşı karşıyadır. Bu eksiklik, etkili marketing çalışmaları yapmak, bütçeyi verimli kullanmak ve müşterilere özel pazarlama stratejileri oluşturmak konusundaki potansiyeli kısıtlamaktadır. Müşteri odaklı ve kişiselleştirilmiş hizmet sunma amacıyla, tatil tercih verilerini toplama ve istatistiksel analizlerle değerlendirme ihtiyacı doğmuştur.*. 

# Q2 : Proje Amacı
[TourPackagePrediction](https://www.kaggle.com/datasets/sanamps/tourpackageprediction)  TourPackagePrediction adli Kaggle veri setini kullanarak iş problemini verilerin istatistiksel dağılım analizi yaparak bu analizi, **müşteri segmentasyonu**, **eğilimlerin belirlenmesi** ve **potansiyel pazarlama hedeflerinin tanımlanması ** için önemli bilgiler olarak kullanacağız.*Bu projenin temel amacı, B&M Travel şirketinin pazarlama stratejilerini güçlendirmek ve müşteri odaklı hizmet sunabilmesi için tatil tercih verilerini etkili bir şekilde toplamak, analiz etmek ve kullanmaktır*. İlk olarak, mevcut veri setine **"TercihEttigiTatilTipi"** adında yeni bir değişken ekleyerek müşterilerin kış tatili, yaz tatili, kültürel gezi veya doğa gezisi gibi tercihlerini belirlemeyi amaçlıyoruz. Bu, şirketin müşteri profilini daha iyi anlamasına ve pazarlama stratejilerini kişiselleştirmesine yardımcı olacaktır.

Marketing bölümüne düzenli raporlar sunarak, hangi müşteri gruplarının daha fazla ilgi gösterdiği, hangi tatil türlerinin daha popüler olduğu gibi konularda strateji belirleme sürecini destekleyeceğiz.

Son olarak, pazarlama faaliyetleri sonrasında yapılan satın alma analizi, şirketin gerçekleştirdiği stratejilerin başarısını değerlendirecek ve iyileştirmeler için rehberlik sağlayacaktır. Bu analizler sayesinde B&M Travel, müşterileriyle daha etkili bir iletişim kurarak tatil tercihlerine yönelik kişiselleştirilmiş kampanyalar düzenleyebilecek ve böylece müşteri memnuniyetini artırarak satışlarını optimize edebilecektir


# Q3 : Veri seti keşifsel analizi


Projenin analizi için veri setindeki önemli satırlar arasında sayısal değerler bulunmaktadır. Örneğin, **yaş (age)**, **ürünün alınıp alınmadığı (prodtaken)** ve **maaş (salary)** gibi sayısal değerlere ait bilgiler, analizin temelini oluşturmaktadır. Bu sayısal değerler, yaşın tam sayısal bir veri tipine **(num)** sahip olduğu, aynı zamanda ürün alım süresi (prodtaken) ve maaş (salary) bilgilerinin de **numeric ** veri tipine sahip olduğu anlamına gelir.

Veri setindeki kategorik sütunlar, daha anlamlı bir temsil sağlamak amacıyla **faktör** tipine dönüştürülmüştür. Örneğin, TypeofContact sütunu bu dönüşümü geçirmelidir. Sayısal değerlerin ondalık durumu düzeltilmiş ve örneğin, MonthlyIncome sütunundaki virgül noktaya çevrilmiştir.

Satırların veri tipi kontrol edildiğinde, eksik değerlere sahip satırların veri setinden çıkarılması gerekmektedir. Bu, analizin doğruluğunu artırabilir ve sonuçların güvenilirliğini sağlayabilir.Bir diğer eksik dönüşümlerdir; örneğin, EUR para birimindeki satış verileri TRY'ye çevrilmelidir.

Sonuç olarak, veri setinin temizlenmiş, dönüştürülmüş ve eksik değerlerden arındırılmış olduğunu söyleyebiliriz. Bu, projenin analitik sürecini iyileştirecek ve sonuçların güvenilirliğini artıracaktır.

```{r echo=FALSE, message=FALSE, warning=FALSE}



# Veri dosyasını internetten indir ve git repo'sunun içine commitle
filename_1 <- "tour_package.csv"


# Dosyayi ithal et
library(readr)
myDF_1 <- read_csv(filename_1)

```
Veri setlerinin bilgileri aşağıda verilmiştir.
  
  **TourPackagePrediction Dataset**
- *Satir sayisi* : `r nrow(myDF_1)`
- *Sütun sayisi* : `r ncol(myDF_1)`

**TourPackagePrediction Dataset**

```{r echo=FALSE, message=FALSE, warning=FALSE}
setwd("C:/Program Files/R/210401031")
myDF_1
```
Datasetimizdeki yaş verilerinin marketing sektöründe etkilyeci bir rolü vardır. Aşağıda bu veriler histogram ile gösterilmiştir.

```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(myDF_1$Age,breaks =20)
```

Datasetinde aşağıdaki hesaplamalar yapılmıştır.
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)

# Veri setinde yaş sütunu var mı kontrol et
if ("Age" %in% colnames(myDF_1)) {
  # Eğer yaş sütunu varsa istatistiksel tabloyu oluştur
  stats_table <- myDF_1 %>%
    summarise(
      Ortalama_Yas = mean(Age, na.rm = TRUE),
      Medyan_Yas = median(Age, na.rm = TRUE),
      Standart_Sapma_Yas = sd(Age, na.rm = TRUE),
      Min_Yas = min(Age, na.rm = TRUE),
      Max_Yas = max(Age, na.rm = TRUE)
    )

  print(stats_table)
} else {
  print("Veri setinde 'Age' sütunu bulunamadı.")
}

```

Datasetinde cinsiyet pasta grafiği oluşmuştur.
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)
library(ggplot2)
if ("Gender" %in% colnames(myDF_1)) {
  # Gender sütununu faktör olarak tanımla
  myDF_1$Gender <- as.factor(myDF_1$Gender)

  # Pasta grafiği oluştur
  gender_pie <- ggplot(myDF_1, aes(x = "", fill = Gender)) +
    geom_bar(width = 1, stat = "count") +
    coord_polar("y") +
    labs(title = "Gender Dağılımı") +
    scale_fill_manual(values = c("Male" = "skyblue", "Female" = "pink"))  # Renkler isteğe bağlı, değiştirilebilir
}

gender_pie
```

# Q4 : Veri seti ön işlemesi


Tabloda ham versi setleri okundu ve aşağıdaki işlemler yapıldı.
Veri Seti Ön İşleme Adımları:

Kategorik sütunlar, **faktör** tipine dönüştürüldü. Örnek olarak, TypeofContact sütunu bu şekilde işlendi.
Sayısal değerlerin ondalık durumu düzeltildi. Örnek olarak, MonthlyIncome sütunundaki virgül noktaya çevrildi.
Eksik veriler temizlendi. na.omit() fonksiyonu kullanılarak eksik değerlere sahip satırlar veri setinden çıkarıldı.
Dönüşümler gerçekleştirildi. Örnek olarak, EUR para birimindeki satış verileri TRY'ye çevrildi.


```{r echo=FALSE, message=FALSE, warning=FALSE}
# Örnek: TypeofContact sütununu faktör yapma
myDF_1$TypeofContact <- as.factor(myDF_1$TypeofContact)
# Örnek: MonthlyIncome sütunundaki virgülü noktaya çevirme
myDF_1$MonthlyIncome <- as.numeric(gsub(",", ".", myDF_1$MonthlyIncome))
# Örnek: NA değerleri temizleme
myDF_1 <- na.omit(myDF_1)

```

```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}


# Test dosyasını çalıştır ve çıktıları yakala
source("./Q4_tests_demir_bahar_210401031.R")

```

```{r echo=FALSE, message=FALSE, warning=FALSE}
myDF_1
```

# Q5 : Veri mühendisliği


Proje kapsamında, **"TercihEttigiTatilTipi"** adlı yeni bir sütun oluşturuldu. Bu sütun, müşterilerin tatil tercihlerini temsil etmektedir. Oluşturulan sütun, müşterilerin **ürün satın alıp almama durumuna,** **mevsimlerine** ve **iletişim türlerine** bağlı olarak belirlenmiştir. Yeni sütun, aşağıdaki kategorilere dayalı olarak tanımlandı:

Kış tatili tercihi (Winter ve ürün satın alındıysa)
Yaz tatili tercihi (Summer ve ürün satın alındıysa)
Kültürel gezi tercihi (Cultural ve ürün satın alındıysa)
Doğa gezisi tercihi (Nature ve ürün satın alındıysa)
Bu yeni sütun, müşterilerin tatil tercihlerini daha açık bir şekilde temsil ederek veri setini zenginleştirmektedir. Bu bilgi, ilerleyen aşamalarda müşteri tercihlerini anlamak ve pazarlama stratejilerini geliştirmek için kullanılabilir.


**veri seti oluşturma kodları**


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(dplyr)


set.seed(123)  # Seed kullanarak tekrarlanabilir rastgelelik sağlayın
myDF_1$TercihEttigiTatilTipi <- sample(c("Kış tatili Tercihi", "Yaz tatili Tercihi", "Doğa Gezisi Tercihi", "Kültürel Gezi Tercihi"), size = nrow(myDF_1), replace = TRUE)

```

```{r echo=FALSE, message=FALSE, warning=FALSE}
myDF_1 <- myDF_1[!is.na(myDF_1$TercihEttigiTatilTipi), ]

```

```{r echo=FALSE, message=FALSE, warning=FALSE,results='hide'}


# Test dosyasını çalıştır ve çıktıları yakala
source("./Q5_tests_demir_bahar_210401031.R")

```
Yeni eklenen TercihEttigiTatilTipi sütunu aşağıda modellenmiştir
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
# Gerekli kütüphane yüklenir (eğer yüklü değilse)
if (!requireNamespace("ggplot2", quietly = TRUE)) {
  install.packages("ggplot2")
}
library(ggplot2)

# Bar plot oluşturulur
ggplot(myDF_1, aes(x = TercihEttigiTatilTipi)) +
  geom_bar(fill = "blue", alpha = 0.7) +
  labs(title = "TercihEttigiTatilTipi Dağılımı", x = "Tatil Tercihi", y = "Frekans")




```

# Q6 : Veri analizi

**Müşteri Tercihlerinin Dağılımı:**

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Müşteri tercihlerinin dağılımı
tercih_dagilimi <- table(myDF_1$TercihEttigiTatilTipi)

# Dağılımın görselleştirilmesi
barplot(tercih_dagilimi, main = "Müşteri Tercihlerinin Dağılımı", xlab = "Tatil Tercihi", ylab = "Frekans", col = "blue")


```

**Müşteri Tercihlerine Göre Ortalama Gelir:**

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Müşteri tercihlerine göre ortalama gelir
gelir_ortalama <- myDF_1 %>%
  group_by(TercihEttigiTatilTipi) %>%
  summarise(Ortalama_Gelir = mean(MonthlyIncome))

# Ortalama gelirin görselleştirilmesi
ggplot(gelir_ortalama, aes(x = TercihEttigiTatilTipi, y = Ortalama_Gelir)) +
  geom_bar(stat = "identity", fill = "blue", alpha = 0.7) +
  labs(title = "Müşteri Tercihlerine Göre Ortalama Gelir", x = "Tatil Tercihi", y = "Ortalama Gelir")



```

**MMüşteri Tercihlerine Göre Satın Alma Durumu Analizi**
```{r echo=FALSE, message=FALSE, warning=FALSE}
# Müşteri tercihlerine göre satın alma durumu analizi
satinalma_durumu <- myDF_1 %>%
  group_by(TercihEttigiTatilTipi, ProdTaken) %>%
  summarise(Frekans = n())

# Görselleştirme
ggplot(satinalma_durumu, aes(x = TercihEttigiTatilTipi, y = Frekans, fill = factor(ProdTaken))) +
  geom_bar(stat = "identity", position = "dodge", alpha = 0.7) +
  labs(title = "Müşteri Tercihlerine Göre Satın Alma Durumu", x = "Tatil Tercihi", y = "Frekans", fill = "Satın Alma Durumu")


```

**Maaşlar ile "TercihEttigiTatilTipi" sütunu arasındaki ilişkiyi incelemek için bir istatistiksel model ve grafik oluşturabiliriz. Ancak, bu örnekte regresyon analizi kullanarak ilişkiyi değerlendireceğim. Aşağıda bir örnek R kodu bulunmaktadır**

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Önce gerekli kütüphaneleri yükleme
library(ggplot2)
library(lmtest)

# Regresyon modelini oluşturma
model <- lm(MonthlyIncome ~ TercihEttigiTatilTipi, data = myDF_1)

# Regresyon modelinin özetini gösterme
summary(model)

# Grafik oluşturma
ggplot(myDF_1, aes(x = TercihEttigiTatilTipi, y = MonthlyIncome)) +
  geom_boxplot() +
  geom_jitter(aes(color = TercihEttigiTatilTipi), width = 0.2, alpha = 0.5) +
  labs(title = "Maaşlar ile Tatil Tercihi İlişkisi",
       x = "Tatil Tercihi",
       y = "Aylık Gelir") +
  theme_minimal()


```
